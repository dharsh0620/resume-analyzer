<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Resume Analyzer</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f6f8fb; margin:0; padding:30px; }
    .container { max-width:900px; margin:0 auto; background:white; padding:20px; border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,0.06);}
    h1 { margin-top:0; }
    .upload { display:flex; gap:10px; }
    .card { background:#fff; padding:15px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.04); margin-top:15px;}
    .profile { display:flex; gap:12px; flex-wrap:wrap; }
    .pill { background:#e6f0ff; padding:6px 10px; border-radius:999px; color:#073b8a; font-weight:600; }
    .result-grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin-top:12px; }
    pre { white-space:pre-wrap; font-family:inherit; }
    .btn { background:#0b63d6; color:white; padding:10px 14px; border-radius:8px; border:none; cursor:pointer;}
  </style>
</head>
<body>
  <div class="container">
    <h1>Resume Analyzer</h1>
    <p>Upload your resume (PDF or DOCX). The analyzer extracts skills, suggests improvements, and gives an ATS-style score for common job roles.</p>

    <div class="card upload">
      <form method="POST" enctype="multipart/form-data">
        <input type="file" name="resume" accept=".pdf,.docx" required>
        <button class="btn" type="submit">Analyze</button>
      </form>
    </div>

    {% if result %}
      <div class="card">
        <h2>Best Match: {{ result.best_match.title }}</h2>
        <p><strong>Score:</strong> {{ result.best_match.score }}%</p>
        <div class="result-grid">
          <div>
            <h3>Profile Breakdowns</h3>
            {% for key, p in result.profile_scores.items() %}
              <div style="margin-bottom:8px;">
                <strong>{{ p.title }}</strong> â€” <span style="font-weight:700">{{ p.score }}%</span><br>
                <small>Matches: {{ p.matches|join(', ') }}</small><br>
                <small style="color:#c00">Missing: {{ p.missing|join(', ') }}</small>
              </div>
            {% endfor %}
          </div>

          <div>
            <h3>Top Keywords</h3>
            <div class="profile">
              {% for k in result.top_keywords %}
                <div class="pill">{{ k }}</div>
              {% endfor %}
            </div>

            <h3 style="margin-top:12px;">Suggestions</h3>
            <ul>
              {% for s in result.suggestions %}
                <li>{{ s }}</li>
              {% endfor %}
            </ul>

            <p><strong>Avg words/sentence:</strong> {{ result.avg_words_per_sentence }}</p>
          </div>
        </div>

        <h3 style="margin-top:12px">Resume preview (first 5000 chars)</h3>
        <pre>{{ result.preview }}</pre>
      </div>
    {% endif %}
  </div>
</body>
</html>
